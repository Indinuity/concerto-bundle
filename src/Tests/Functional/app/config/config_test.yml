concerto:
    soloist_class: Engine\Bundle\TenantBundle\Entity\Client
    solo_name: hostname
    solos:
        hostname:
            arguments:
                - @concerto_test_repository
                - id

doctrine:
    dbal:
        default_connection: default
        connections:
            default:
                driver:   pdo_sqlite
                path:     %kernel.cache_dir%/test.db
    orm:
        auto_generate_proxy_classes: %kernel.debug%
        entity_managers:
            default:
                mappings:
                    CtrlConcertoBundle:
                        type: annotation
                        prefix: Ctrl\Bundle\ConcertoBundle\Tests\Fixtures\Entity
                        dir: "%kernel.root_dir%/../../Fixtures/Entity/"
                        is_bundle: false

framework:
    secret: 'ThisIsNotASecretKey'
    test: ~
    session:
        storage_id: session.storage.filesystem

liip_functional_test: ~

services:
    concerto_test_repository:
        class:            Ctrl\Bundle\ConcertoBundle\ORM\Repository\ConcertoEntityRepository
        factory_service:  doctrine.orm.entity_manager
        factory_method:   getRepository
        arguments:
            - Ctrl\Bundle\ConcertoBundle\Tests\Fixtures\Entity\HostnameSoloist
